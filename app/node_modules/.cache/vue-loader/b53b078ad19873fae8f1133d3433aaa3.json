{"remainingRequest":"/home/fm/workspace/vue/vue-skynet/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/fm/workspace/vue/vue-skynet/app/src/components/TariffOptions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/fm/workspace/vue/vue-skynet/app/src/components/TariffOptions.vue","mtime":1566493112516},{"path":"/home/fm/workspace/vue/vue-skynet/app/node_modules/cache-loader/dist/cjs.js","mtime":1565021543729},{"path":"/home/fm/workspace/vue/vue-skynet/app/node_modules/thread-loader/dist/cjs.js","mtime":1565453360820},{"path":"/home/fm/workspace/vue/vue-skynet/app/node_modules/babel-loader/lib/index.js","mtime":1565021541238},{"path":"/home/fm/workspace/vue/vue-skynet/app/node_modules/cache-loader/dist/cjs.js","mtime":1565021543729},{"path":"/home/fm/workspace/vue/vue-skynet/app/node_modules/vue-loader/lib/index.js","mtime":1565021544267}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    tariffs: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      tariff: {\n        type: Array,\n        required: true\n      },\n      minIds: null\n    };\n  },\n  methods: {\n    back() {\n      this.$router.go(-1);\n    },\n    setDiscounts() {\n      this.tariffs.map(item => {\n        const { tarifs } = item;\n\n        const ids = tarifs.map(elem => elem.ID);\n        const minId = Math.min.apply(null, ids);\n        const defaultPrice = tarifs.filter(elem => elem.ID === minId)[0].price;\n\n        item.tarifs\n          .filter(elem => elem !== minId)\n          .map(elem => {\n            elem[\"discount\"] = elem.price - defaultPrice;\n            return elem;\n          });\n\n        return item;\n      });\n    },\n    getMinId() {\n      this.minIds = this.tariffs.map(item => {\n        const { tarifs } = item;\n\n        const ids = tarifs.map(elem => elem.ID);\n        const minId = Math.min.apply(null, ids);\n\n        return minId;\n      });\n    }\n  },\n  created() {\n    this.tariff = this.tariffs.filter(\n      item => item.title == this.$route.params.title\n    )[0];\n    this.setDiscounts();\n    this.getMinId();\n  }\n};\n",{"version":3,"sources":["TariffOptions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TariffOptions.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"tariff-options\">\n    <div class=\"header\">\n      <div class=\"header__left\">\n        <i class=\"left\" @click.prevent=\"back\"></i>\n      </div>\n      <div class=\"header__right\">\n        <span>Тариф \"{{ tariff.title }}\"</span>\n      </div>\n    </div>\n\n    <div class=\"tariff-options__tariffs\" v-for=\"row in tariff.tarifs\" v-bind:key=\"row.ID\">\n      <router-link :to=\"{ name: 'details', params: {id: row.ID } }\">\n        <h2 class=\"tariff-options__pay-period\">{{row.pay_period}} месяц</h2>\n      </router-link>\n      <div class=\"tariff-options__short-desc\">\n        <h2 class=\"tariff-options__short-desc__price\">{{row.price}} Р/мес</h2>\n        <p class=\"tariff-options__short-desc__single-payment\">разовый платеж - {{ row.price }} Р/мес</p>\n        <p\n          v-if=\"!minIds.includes(row.ID)\"\n          class=\"tariff-options__short-desc__dicount\"\n        >скидка - {{ row.discount }} Р</p>\n        <router-link :to=\"{ name: 'details', params: {id: row.ID } }\">\n          <i class=\"right\"></i>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    tariffs: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      tariff: {\n        type: Array,\n        required: true\n      },\n      minIds: null\n    };\n  },\n  methods: {\n    back() {\n      this.$router.go(-1);\n    },\n    setDiscounts() {\n      this.tariffs.map(item => {\n        const { tarifs } = item;\n\n        const ids = tarifs.map(elem => elem.ID);\n        const minId = Math.min.apply(null, ids);\n        const defaultPrice = tarifs.filter(elem => elem.ID === minId)[0].price;\n\n        item.tarifs\n          .filter(elem => elem !== minId)\n          .map(elem => {\n            elem[\"discount\"] = elem.price - defaultPrice;\n            return elem;\n          });\n\n        return item;\n      });\n    },\n    getMinId() {\n      this.minIds = this.tariffs.map(item => {\n        const { tarifs } = item;\n\n        const ids = tarifs.map(elem => elem.ID);\n        const minId = Math.min.apply(null, ids);\n\n        return minId;\n      });\n    }\n  },\n  created() {\n    this.tariff = this.tariffs.filter(\n      item => item.title == this.$route.params.title\n    )[0];\n    this.setDiscounts();\n    this.getMinId();\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.tariff-options {\n  display: grid;\n  grid-gap: 20px;\n  max-width: 640px;\n  margin: 0 auto;\n\n  .right {\n    transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n    position: relative;\n    left: calc(100% - 3em);\n    bottom: 2em;\n    cursor: pointer;\n  }\n\n  &__tariffs {\n    border-radius: 3px;\n    border-top: 1px solid #ddd;\n    border-bottom: 1px solid #ddd;\n    padding-left: 1em;\n    background-color: #ffffff;\n  }\n\n  &__pay-period {\n    color: #8cc637;\n    border-bottom: 1px solid #ddd;\n    margin: 0;\n    line-height: 50px;\n    cursor: pointer;\n  }\n\n  &__short-desc__price {\n    margin: 10px 0;\n  }\n}\n</style>"]}]}