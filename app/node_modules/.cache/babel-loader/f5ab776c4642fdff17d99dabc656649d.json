{"remainingRequest":"/home/fm/workspace/vue/vue-skynet/frontend/node_modules/thread-loader/dist/cjs.js!/home/fm/workspace/vue/vue-skynet/frontend/node_modules/babel-loader/lib/index.js!/home/fm/workspace/vue/vue-skynet/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/fm/workspace/vue/vue-skynet/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/fm/workspace/vue/vue-skynet/frontend/src/components/TariffOptions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/fm/workspace/vue/vue-skynet/frontend/src/components/TariffOptions.vue","mtime":1566493112516},{"path":"/home/fm/workspace/vue/vue-skynet/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1565021543729},{"path":"/home/fm/workspace/vue/vue-skynet/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1565453360820},{"path":"/home/fm/workspace/vue/vue-skynet/frontend/node_modules/babel-loader/lib/index.js","mtime":1565021541238},{"path":"/home/fm/workspace/vue/vue-skynet/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1565021543729},{"path":"/home/fm/workspace/vue/vue-skynet/frontend/node_modules/vue-loader/lib/index.js","mtime":1565021544267}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    tariffs: {\n      type: Array,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      tariff: {\n        type: Array,\n        required: true\n      },\n      minIds: null\n    };\n  },\n  methods: {\n    back: function back() {\n      this.$router.go(-1);\n    },\n    setDiscounts: function setDiscounts() {\n      this.tariffs.map(function (item) {\n        var tarifs = item.tarifs;\n        var ids = tarifs.map(function (elem) {\n          return elem.ID;\n        });\n        var minId = Math.min.apply(null, ids);\n        var defaultPrice = tarifs.filter(function (elem) {\n          return elem.ID === minId;\n        })[0].price;\n        item.tarifs.filter(function (elem) {\n          return elem !== minId;\n        }).map(function (elem) {\n          elem[\"discount\"] = elem.price - defaultPrice;\n          return elem;\n        });\n        return item;\n      });\n    },\n    getMinId: function getMinId() {\n      this.minIds = this.tariffs.map(function (item) {\n        var tarifs = item.tarifs;\n        var ids = tarifs.map(function (elem) {\n          return elem.ID;\n        });\n        var minId = Math.min.apply(null, ids);\n        return minId;\n      });\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    this.tariff = this.tariffs.filter(function (item) {\n      return item.title == _this.$route.params.title;\n    })[0];\n    this.setDiscounts();\n    this.getMinId();\n  }\n};",{"version":3,"sources":["TariffOptions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,MAAA,EAAA;AALA,KAAA;AAOA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AAAA,YACA,MADA,GACA,IADA,CACA,MADA;AAGA,YAAA,GAAA,GAAA,MAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,EAAA;AAAA,SAAA,CAAA;AACA,YAAA,KAAA,GAAA,IAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,EAAA,GAAA,CAAA;AACA,YAAA,YAAA,GAAA,MAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,EAAA,KAAA,KAAA;AAAA,SAAA,EAAA,CAAA,EAAA,KAAA;AAEA,QAAA,IAAA,CAAA,MAAA,CACA,MADA,CACA,UAAA,IAAA;AAAA,iBAAA,IAAA,KAAA,KAAA;AAAA,SADA,EAEA,GAFA,CAEA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,UAAA,CAAA,GAAA,IAAA,CAAA,KAAA,GAAA,YAAA;AACA,iBAAA,IAAA;AACA,SALA;AAOA,eAAA,IAAA;AACA,OAfA;AAgBA,KArBA;AAsBA,IAAA,QAtBA,sBAsBA;AACA,WAAA,MAAA,GAAA,KAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AAAA,YACA,MADA,GACA,IADA,CACA,MADA;AAGA,YAAA,GAAA,GAAA,MAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,EAAA;AAAA,SAAA,CAAA;AACA,YAAA,KAAA,GAAA,IAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,EAAA,GAAA,CAAA;AAEA,eAAA,KAAA;AACA,OAPA,CAAA;AAQA;AA/BA,GAhBA;AAiDA,EAAA,OAjDA,qBAiDA;AAAA;;AACA,SAAA,MAAA,GAAA,KAAA,OAAA,CAAA,MAAA,CACA,UAAA,IAAA;AAAA,aAAA,IAAA,CAAA,KAAA,IAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,KAAA;AAAA,KADA,EAEA,CAFA,CAAA;AAGA,SAAA,YAAA;AACA,SAAA,QAAA;AACA;AAvDA,CAAA","sourcesContent":["<template>\n  <div class=\"tariff-options\">\n    <div class=\"header\">\n      <div class=\"header__left\">\n        <i class=\"left\" @click.prevent=\"back\"></i>\n      </div>\n      <div class=\"header__right\">\n        <span>Тариф \"{{ tariff.title }}\"</span>\n      </div>\n    </div>\n\n    <div class=\"tariff-options__tariffs\" v-for=\"row in tariff.tarifs\" v-bind:key=\"row.ID\">\n      <router-link :to=\"{ name: 'details', params: {id: row.ID } }\">\n        <h2 class=\"tariff-options__pay-period\">{{row.pay_period}} месяц</h2>\n      </router-link>\n      <div class=\"tariff-options__short-desc\">\n        <h2 class=\"tariff-options__short-desc__price\">{{row.price}} Р/мес</h2>\n        <p class=\"tariff-options__short-desc__single-payment\">разовый платеж - {{ row.price }} Р/мес</p>\n        <p\n          v-if=\"!minIds.includes(row.ID)\"\n          class=\"tariff-options__short-desc__dicount\"\n        >скидка - {{ row.discount }} Р</p>\n        <router-link :to=\"{ name: 'details', params: {id: row.ID } }\">\n          <i class=\"right\"></i>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    tariffs: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      tariff: {\n        type: Array,\n        required: true\n      },\n      minIds: null\n    };\n  },\n  methods: {\n    back() {\n      this.$router.go(-1);\n    },\n    setDiscounts() {\n      this.tariffs.map(item => {\n        const { tarifs } = item;\n\n        const ids = tarifs.map(elem => elem.ID);\n        const minId = Math.min.apply(null, ids);\n        const defaultPrice = tarifs.filter(elem => elem.ID === minId)[0].price;\n\n        item.tarifs\n          .filter(elem => elem !== minId)\n          .map(elem => {\n            elem[\"discount\"] = elem.price - defaultPrice;\n            return elem;\n          });\n\n        return item;\n      });\n    },\n    getMinId() {\n      this.minIds = this.tariffs.map(item => {\n        const { tarifs } = item;\n\n        const ids = tarifs.map(elem => elem.ID);\n        const minId = Math.min.apply(null, ids);\n\n        return minId;\n      });\n    }\n  },\n  created() {\n    this.tariff = this.tariffs.filter(\n      item => item.title == this.$route.params.title\n    )[0];\n    this.setDiscounts();\n    this.getMinId();\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.tariff-options {\n  display: grid;\n  grid-gap: 20px;\n  max-width: 640px;\n  margin: 0 auto;\n\n  .right {\n    transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n    position: relative;\n    left: calc(100% - 3em);\n    bottom: 2em;\n    cursor: pointer;\n  }\n\n  &__tariffs {\n    border-radius: 3px;\n    border-top: 1px solid #ddd;\n    border-bottom: 1px solid #ddd;\n    padding-left: 1em;\n    background-color: #ffffff;\n  }\n\n  &__pay-period {\n    color: #8cc637;\n    border-bottom: 1px solid #ddd;\n    margin: 0;\n    line-height: 50px;\n    cursor: pointer;\n  }\n\n  &__short-desc__price {\n    margin: 10px 0;\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}